<!--############-->
<!--# This page gets all the in-->
<!--# Author : @oswaldbernard-->
<!--############-->

<!--############-->
<!--# it also add the alpinejs, tailwindcss and pouchdb to the project-->
<!--# Author : @oswaldbernard-->
<!--############-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
            name="viewport"
    />

    <title>Jaffar (Judicious assisted form for autonomous remediation)</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,container-queries"></script>
    <script src="https://cdn.jsdelivr.net/npm/gridjs/dist/gridjs.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pouchdb@9.0.0/dist/pouchdb.min.js"></script>
    <!-- Importation du fichier questions.json -->
    <script src="./questions.json" type="application/json" id="questions-fallback"></script>
    <!-- the js file to manage this page -->
    <script src="./jaffar.js"></script>


    <style>
      [x-cloak] { display: none !important; }

    </style>
</head>

<body>
<!-- ############################################################## -->
<!-- JAFFAR APP -->
<!-- ############################################################## -->

<div class="mx-auto flex min-h-screen min-w-screen" x-data="jaffar()">

    <!-- ############################################################## -->
    <!-- ##################### empty first page to hide  #######################-->
    <!-- ############################################################## -->
    <div class="h-screen w-screen bg-gray-900 z-50" x-show="!page"></div>

    <!-- ############################################################## -->
    <!-- ##################### Loading page  #######################-->
    <!-- ############################################################## -->
    <div class="h-screen fixed w-screen text-white bg-gray-900 flex items-center justify-center"
         x-show="page=='loading'">
        <div role="status">
            <svg aria-hidden="true" class="inline w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-red-600"
                 fill="none" viewBox="0 0 100 101" xmlns="http://www.w3.org/2000/svg">
                <path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z"
                      fill="currentColor"/>
                <path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z"
                      fill="currentFill"/>
            </svg>
            <span class="sr-only">Loading...</span>
        </div>

    </div>

    <!-- ############################################################## -->
    <!-- ##################### force update page  #######################-->
    <!-- ############################################################## -->
    <div class="h-screen fixed w-screen text-white bg-gray-900 flex items-center justify-center"
         x-show="page=='force-update'||version!=1">
        <div class="flex items-center p-4 mb-4 text-sm rounded-lg  bg-gray-800 text-red-400" role="alert">
            <svg aria-hidden="true" class="flex-shrink-0 inline w-4 h-4 me-3" fill="currentColor"
                 viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
            </svg>
            <span class="sr-only">Info</span>
            <div>
                <span class="font-medium">Please update!</span> This version of Jaffar is not the good one. Please
                update: https://gbmt-confluence.prd.fx.gbm.cloud.uk.hsbc/display/GPCR/Update+JAFFAR.
            </div>
        </div>

    </div>

    <!-- ############################################################## -->
    <!-- ##################### login page  #######################-->
    <!-- ############################################################## -->
    <template x-if="page=='login'">
         <div class="fixed flex h-screen w-screen items-center justify-center bg-gray-900 text-white">
        <div class="grid grid-cols-2 items-center place-items-center border w-screen mx-auto h-screen">
            <div class="flex flex-col w-1/3">
                <label
                        class="ml-2 text-sm font-medium"
                >Your email:</label
                >
                <input
                        requiered
                        class="mt-1 w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                        type="text"
                        x-model.debounce="author"
                />
                <button class="hoverx-text-gray-500 hover:cursor-pointer bg-red-600 px-4 py-2 rounded text-center font-bold mt-4" @click="author.length>0 && setAuth()">
                    Login
                </button>
            </div>
            <div class="">
                <h1 class="text-white text-8xl">JAFFAR</h1>
            </div>
        </div>
    </div>
    </template>


    <!-- ############################################################## -->
    <!-- ##################### Side menu  #######################-->
    <!-- ############################################################## -->
    <template x-if="!['loading','force-update','login'].includes(page)">
    <aside aria-label="Sidebar"
           class="fixed bg-gray-900 text-white left-0 z-40 p-4 w-[280px] h-full transition-transform -translate-x-full sm:translate-x-0"
           id="default-sidebar"
    >
        <div
                class="h-full fixed px-3 py-4 overflow-y-auto bg-gray-900 text-white"
        >
            <div class="items-center-space-x-4 flex">
                <img class="mr-2 h-7"
                     src="https://stash.hk.hsbc/projects/STRATPCJAFFAR/repos/pc-jaffar/raw/apps/pc_analytics_jaffar/assets/images/hsbc-logo.png"/>
                <h4 class="mb-4 text-center text-xl font-semibold">JAFFAR</h4>
            </div>
            <ul class="space-y-2 font-medium mt-4">
                <label class="inline-flex items-center cursor-pointer" @click.prevent="demoMode=!demoMode,console.log(demoMode,'demomode')">
                    <input checked class="sr-only peer" type="checkbox" x-model="demoMode">
                    <div class="relative w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
                    <span class="ms-3 text-sm font-medium text-white">Demo mode</span>
                </label>
                <li>
                    <a
                            @click.prevent="showFormPage()"
                            class="cursor-pointer flex items-center p-2 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group"
                    >
                        <svg class="size-6" fill="none" stroke="currentColor" stroke-width="1.5"
                             viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" stroke-linecap="round"
                                  stroke-linejoin="round"/>
                        </svg>

                        <span class="ms-3">Home</span>
                    </a>
                </li>
                <li>
                    <a
                            class="cursor-pointer flex items-center p-2 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group"
                    >
                        <svg
                                class="size-6"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="1.5"
                                viewBox="0 0 24 24"
                                xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                    d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                            />
                        </svg>
                        <span class="ms-3">Talk to Jaffar - coming soon</span>
                    </a>
                </li>
                <li>
                    <a @click.prevent="page='jaffar-settings'"
                       class="cursor-pointer flex items-center p-2 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group"
                       x-show="false"
                    >
                        <svg
                                class="size-6"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="1.5"
                                viewBox="0 0 24 24"
                                xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                    d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                            />
                        </svg>
                        <span class="ms-3">My issues</span>
                    </a>
                </li>
            </ul>
            <ul class="space-y-2 font-medium absolute inset-x-0 bottom-10">
                <li>
                    <a
                            class="cursor-pointer flex items-center p-2 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group"
                            href="https://gbmt-confluence.prd.fx.gbm.cloud.uk.hsbc/pages/viewpage.action?pageId=1447600718"
                            target="_blank"
                    >
                        <span class="ms-3">Documentation</span>
                    </a>
                </li>
                <li>
                    <a
                            @click.prevent="page='get-jaffar-config'"
                            class="cursor-pointer flex items-center p-2 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group"
                    >
                        <span class="ms-3">Get the config</span>
                    </a>
                </li>
                <li>
                    <a class="cursor-pointer flex items-center p-2 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group"
                       href="/pc-analytics-jaffar/assets/sultan/index.html"
                    >
                        <span class="ms-3">Go to SULTAN</span>
                    </a>
                </li>
                <li>
                    <p>V <span x-text="version"></span></p>
                </li>
            </ul>
        </div>
    </aside>
    </template>

    <template  x-if="!['loading','force-update','login'].includes(page)">
            <!-- ############################################################## -->
    <!-- ##################### Main content  #######################-->
    <!-- ############################################################## -->
    <div class="fixed p-4 pl-8 ml-[270px] bg-black mr-[20px] w-full h-screen pb-1 overflow-y-auto"

    >
        <!-- ############################################################## -->
        <!-- ##################### Chat page  #######################-->
        <!-- ############################################################## -->
        <div
                class="fixed grid grid-cols-6 space-x-4 p-2 pb-4 min-h-[98vh]"
                id="chat"
                x-show="page=='chat'"
        >
            <div class="bg-gray-800 w-min-[350px] p-3">
                <h2 class="text-white font-bold text-xl">Issues - Drafts</h2>
                <hr class="mb-3"/>
                <div
                        class="text-white hoverx-text-gray-500 hover:cursor-pointer bg-red-600 px-4 py-2 rounded text-center font-bold"
                >
                    New chat with Jaffar
                </div>
                <ul class="mt-3 text-white font-bold grid grid-cols-3">
                    <li
                            class="col-span-2 px-4 hover:bg-gray-700 rounded p-2 hover:cursor-pointer"
                    >
                        Chat#1
                    </li>
                    <button
                            @click.prevent="deleteChat()"
                            class="text-red-600 bg-transparent px-4 py-2 rounded hover:bg-red-600 hoverx-text-white"
                    >
                        Delete
                    </button>
                </ul>
            </div>

            <div class="grid grid-rows-9 col-span-5 w-[74vw] h-[96vh]">
                <!-- Messages container with dark mode styling and Alpine.js data for messages -->
                <div
                        class="bg-gray-800 p-3 mt-1 rounded row-span-8 overflow-y-auto"
                        id="messages"
                >
                    <!-- Template to loop through and display messages dynamically -->
                    <template x-for="message in messages">
                        <div>
                            <!--one item only in the template tag-->
                            <div class="text-white">
                    <span class="font-bold" x-show="message.role=='user'"
                    >You</span
                    >
                                <span
                                        class="font-bold"
                                        x-show="message.role.includes('jaffar')"
                                >Jaffar</span
                                >
                                <span x-show="!message.role.includes('thinking')"
                                ><span class="text-sm"> - </span
                                ><span class="text-xs" x-text="message.date"></span
                                ></span>
                            </div>
                            <div
                                    :class="message.role.includes('thinking') && 'animate-pulse' && 'text-6xl'"
                                    class="text-gray-300"
                                    x-html="window.marked(message.text)"
                            ></div>
                        </div>
                    </template>
                </div>

                <!-- Input area for new messages with dark mode styling -->
                <div class="mt-3 flex space-x-2 w-">
              <textarea
                      @keyup.ctrl.enter="newUserMessage(newMessage,'user'); newMessage = '';scroll()"
                      autocomplete="off"
                      class="w-full p-2 bg-gray-900 text-gray-200 rounded border border-gray-600"
                      id="message"
                      placeholder="Enter your message here"
                      x-model.debounce="newMessage"
              ></textarea>
                    <button
                            @click.prevent="newUserMessage(newMessage,'user'); newMessage = '';"
                            class="bg-red-600 text-white px-4 py-2 rounded"
                    >
                        Send
                    </button>
                </div>
            </div>
        </div>

        <!-- ############################################################## -->
        <!-- ##################### FORM SLIDESHOW PAGE  #######################-->
        <!-- ############################################################## -->
        <div
                class="space-x-4 p-3 flex h-screen fixed overflow-y-auto w-10/12 mr-10"
                x-show="page=='form-slideshow'"
        >
            <!-- left menu issues -->
            <div class="mb-5 bg-gray-800 w-[460px] p-4">
                <h2 class="text-white font-bold text-xl">Issues - Drafts</h2>
                <hr class="mb-3"/>
                <div @click.prevent="showFormPage()"
                     class="text-white hoverx-text-gray-500 hover:cursor-pointer bg-red-600 px-4 py-2 rounded text-center font-bold"
                >
                    Raise a new issue
                </div>
                <ul class="space-y-4 text-white max-h-[87vh] overflow-y-auto mt-5">
                    <template x-for="issue in issues">
                        <div class="grid grid-cols-4 text-white border-b-2 align-items">
                            <span class="self-center bg-yellow-100 text-yellow-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-yellow-900 dark:text-yellow-300 row-span-2"
                                  x-show="issue.status=='Incomplete'">INCOMPLETE</span>
                            <span class="self-center bg-green-400 text-green-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded dark:bg-yellow-900 dark:text-yellow-300 row-span-2"
                                  x-show="issue.status=='Complete'">TO SEND</span>
                            <span class="self-center bg-blue-400 text-blue-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded dark:bg-yellow-900 dark:text-yellow-300 row-span-2"
                                  x-show="issue.status=='Sent'">SENT</span>

                            <p class="col-span-4 font-bold" x-text="issue._id">
                                Coucou
                            </p>
                            <p class="col-span-4" x-text="issue.Title">
                                Coucou
                            </p>
                            <p class="text-sm col-span-3">Created the <span
                                    x-text="new Date(Number(issue._id.split('-')[2])).toLocaleDateString()"></span></p>
                            <div class="justify-self-end  pr-3 flex space-x-2 pb-1">
                                <svg @click.prevent="await  selectIssue(issue._id)" class="size-6"
                                     fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125" stroke-linecap="round"
                                          stroke-linejoin="round"/>
                                </svg>
                                <svg @click.prevent="window.confirm('Do you really want to delete this?')&& deleteIssue(issue._id)"
                                     class="size-6" fill="none" stroke="currentColor"
                                     stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" stroke-linecap="round"
                                          stroke-linejoin="round"/>
                                </svg>

                            </div>
                        </div>


                    </template>
                </ul>

            </div>

            <!-- main board -->
            <div class="mb-5 p-auto flex-grow flex bg-gray-800">
                <!-- Start screen -->
                <div
                        class="flex-col flex m-auto w-[40vw] text-white p-8 space-y-2"
                        x-show="questionIndex==-1"
                >
                    <h2 class="text-center text-2xl font-bold">JAFFAR</h2>
                    <h3 class="text-center">
                        ( Judicious Assisted Form For Automatic Remediation )
                    </h3>
                    <button
                            @click.prevent="questions.length>0 && questionIndex++,createANewForm()"
                            class="hoverx-text-gray-500 hover:cursor-pointer bg-red-600 px-4 py-2 rounded text-center font-bold"
                    >
                        Start
                    </button>
                </div>
                <!-- Questions screens -->
                <template x-for="(question,index) in questions">
                    <div
                            class="flex-col flex m-auto text-white p-8 space-y-4 w-[40vw]"
                            x-show="index==questionIndex"
                    >
                        <a @click.prevent="page='send-issue-page'"
                           class="text-white absolute right-10 top-10 hover-text-gray-500 hover:cursor-pointer px-4 py-2 rounded text-center font-bold pt-20">Go to the full form</a>
                        <!--Conditionnal template-->
                        <div
                                class="space-y-2"
                                x-data="{'selected':''}"
                                x-show="question.template=='conditionnal'"
                        >
                            <label
                                    class="block mt-1 font-medium text-xl"
                                    x-text="question.name"
                            >PC Function</label
                            >
                            <div
                                    class="text-gray-300"
                                    x-html="question.description"
                            ></div>
                            <select
                                    :required="question.required"
                                    class="w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                    name="pc-function"
                                    x-model.debounce="answers[question.key]"
                            >
                                <option disabled selected value="">Select an item</option>
                                <template x-for="option in question.options">
                                    <option x-text="option.name" x-value="option.name">
                                        Core PC
                                    </option>
                                </template>
                            </select>

                            <template x-for="optionCond in question.optionsCond">
                                <div
                                        class="mt-4 space-y-2"
                                        x-show="answers[question.key]==optionCond.show"
                                >
                                    <div x-show="optionCond.type=='text_input'">
                                        <label
                                                class="block font-medium text-xl"
                                                x-text="optionCond.name"
                                        >Title of the Issue</label
                                        >
                                        <input
                                                :required="question.required"
                                                class="mt-1 w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                                type="text"
                                                x-model.debounce="answers[optionCond.key]"
                                        />
                                    </div>
                                </div>
                            </template>
                        </div>
                        <!-- Search Single select:  -->
                        <div x-show="question.template=='search_single_select'">
                            <label class="mt-1 font-medium text-xl" x-text="question.name"
                            >PC Function</label
                            >
                            <div
                                    class="text-gray-300"
                                    x-html="question.description"
                            ></div>
                            <input
                                    :list="question.key"
                                    :required="question.required"
                                    class="w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                    name="pc-function"
                                    x-model.debounce="answers[question.key]"
                            />
                            <datalist
                                    :id="question.key"
                                    class="w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                            >
                                <template x-for="option in question.options">
                                    <option
                                            x-text="option.name"
                                            x-value="option.name"
                                    ></option
                                    >
                                </template>
                            </datalist>
                        </div>

                        <!--list template-->
                        <div x-data="{'ans':[]}" x-show="question.template=='list'">
                            <div class="space-y-2">
                                <label
                                        class="block font-medium text-xl"
                                        for="pc-function"
                                        x-text="question.name"
                                >Title of the Issue</label
                                >
                                <div
                                        class="text-gray-300"
                                        x-html="question.description"
                                ></div>

                                <template x-for="(i,index) in ans">
                                    <div class="flex space-x-2">
                                        <input
                                                :required="question.required"
                                                class="mt-1 w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                                type="text"
                                                x-model.debounce="ans[index]"
                                        />
                                        <div
                                                @click.prevent="ans.splice(index,1)"
                                                class="bg-red-600 text-white font-medium w-6 h-6 rounded px-2 mt-3 cursor-pointer place-self-center"
                                        >
                                            -
                                        </div>
                                    </div>
                                </template>
                                <div
                                        @click.prevent="ans.push('1C-0000')"
                                        class="ml-1 float-end px-2 rounded bg-green-600 text-white font-medium cursor-pointer"
                                >
                                    +
                                </div>
                            </div>
                            <input x-model.debounce="answers[question.key]=ans" x-show="false"/>
                        </div>

                        <!--Composite template-->
                        <div
                                class="space-y-2"
                                x-data="{'single_select':'','text_input':''}"
                                x-show="question.template=='composite'"
                        >
                            <label
                                    class="block mt-1 font-medium text-xl"
                                    for="pc-function"
                                    x-text="question.name"
                            >PC Function</label
                            >
                            <div
                                    class="text-gray-300"
                                    x-html="question.description"
                            ></div>
                            <div class="flex">
                                <select
                                        :required="question.required"
                                        class="px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                        id="pc-function"
                                        name="pc-function"
                                        x-model.debounce="single_select"
                                >
                                    <option disabled selected value="">Select an item</option>
                                    <template x-for="option in question.options">
                                        <option x-text="option.name" x-value="option.name">
                                            Core PC
                                        </option>
                                    </template>
                                </select>
                                <p class="px-4 self-center">-</p>
                                <input
                                        :required="question.required"
                                        class="mt-1 flex-grow px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                        type="text"
                                        x-model.debounce="text_input"
                                />
                            </div>
                            <input
                                    x-model.debounce="answers[question.key]=single_select.concat(' - ').concat(text_input)"
                                    x-show="false"
                            />
                        </div>
                        <!--date template-->
                        <div x-show="question.template=='date'">
                            <div class="relative max-w-sm">
                            </div>
                            <div class="space-y-2">
                                <label
                                        class="block font-medium text-xl"
                                        x-text="question.name"
                                >Title of the Issue</label
                                >
                                <div
                                        class="text-gray-300"
                                        x-html="question.description"
                                ></div>
                                <div class="italic"
                                     x-on:click="answers[question.key]=new Date().toISOString().split('T')[0]">today?
                                </div>
                                <input
                                        :required="question.required"
                                        class="mt-1 w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                        placeholder="YYYY-MM-DD"
                                        type="text"
                                        x-mask="9999-99-99"
                                        x-model.debounce="answers[question.key]"
                                />
                            </div>
                        </div>

                        <!--Single select template-->
                        <div x-show="question.template=='single_select'">
                            <label
                                    class="block mt-1 font-medium text-xl"
                                    x-text="question.name"
                            >PC Function</label
                            >
                            <div
                                    class="text-gray-300"
                                    x-html="question.description"
                            ></div>
                            <select
                                    :required="question.required"
                                    class="w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                    name="pc-function"
                                    x-model.debounce="answers[question.key]"
                            >
                                <option disabled selected value="">Select an item</option>
                                <template x-for="option in question.options">
                                    <option x-text="option.name" x-value="option.name">
                                        Core PC
                                    </option>
                                </template>
                            </select>
                        </div>

                        <!--text_input template-->
                        <div x-show="question.template=='text_input'">
                            <div>
                                <label
                                        class="block font-medium text-xl"
                                        x-text="question.name"
                                >Title of the Issue</label
                                >
                                <div
                                        class="text-gray-300"
                                        x-html="question.description"
                                ></div>
                                <input
                                        :required="question.required"
                                        class="mt-1 w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                        type="text"
                                        x-model.debounce="answers[question.key]"
                                />
                            </div>
                        </div>

                        <!--Textarea input-->
                        <div x-show="question.template=='textarea'">
                            <div>
                                <label
                                        class="block font-medium text-xl"
                                        x-text="question.name"
                                >Root Cause - Further Details</label
                                >
                                <div
                                        class="text-gray-300"
                                        x-html="question.description"
                                ></div>
                                <textarea
                                        :required="question.required"
                                        class="min-h-[100px] mt-1 w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                        row="5"
                                        type="textarea"
                                        x-model.debounce="answers[question.key]"
                                ></textarea>
                            </div>
                        </div>

                        <!--multiple checkboxes template-->
                        <div x-data="{filter:''}" x-show="question.template=='multiple_checkbox'">
                            <div>
                                <div class="flex">
                                    <label
                                            class="block font-medium text-xl flex-grow"
                                            x-text="question.name"
                                    >Select Asset class</label
                                    >
                                    <form class="max-w-md mx-auto">
                                        <label class="mb-2 text-sm font-medium sr-only text-white" for="default-search">Search</label>
                                        <div class="relative">
                                            <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                                                <svg aria-hidden="true" class="w-4 h-4 text-gray-400"
                                                     fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z" stroke="currentColor"
                                                          stroke-linecap="round" stroke-linejoin="round"
                                                          stroke-width="2"/>
                                                </svg>
                                            </div>
                                            <input class="block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required
                                                   type="search"
                                                   x-model.debounce="filter"/>
                                        </div>
                                </div>
                                <div
                                        class="text-gray-300"
                                        x-html="question.description"
                                ></div>
                                <div class="space-y-2 mt-1">
                                    <div
                                            class="w-full grid grid-cols-3 auto-cols-max max-h-[50vh] gap-2 overflow-y-auto"
                                    >
                                        <template x-for="(option,index) in question.options">
                                            <div class="flex items-center"
                                                 x-show="filter.length==0||option.name.toLowerCase().includes(filter.toLowerCase())">
                                                <input
                                                        :class="answers[question.key]&&answers[question.key].includes(option.name)&&'bg-red-600 border-red-900'"
                                                        @click.prevent="saveAnswer(question.key,option.name)"
                                                        class="h-4 w-4"
                                                        name="services"
                                                        type="checkbox"
                                                        x-value="option.name"
                                                />
                                                <label
                                                        class="ml-2 text-sm font-medium"
                                                        x-text="option.name"
                                                >ALCM</label
                                                >
                                            </div>
                                        </template>

                                        <template x-if="answers[question.key]&&answers[question.key].includes('Other')">
                                                        <div class="w-full flex flex-col">
                                                            <label class="text-white">Please provide details</label>
                                            <textarea
                                                    class="min-h-[100px] mt-1 px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                                    row="5"
                                                    type="textarea"
                                                    x-model.debounce="answers[question.key]['other']"
                                            ></textarea>
                                                        </div>

                                        </template>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <button
                                @click.prevent="(question.required && answers[question.key]!='')?questionIndex++:(!question.required)?questionIndex++:alert={'type':'Notif','message':'This question is mandatory'}"
                                class="hoverx-text-gray-500 hover:cursor-pointer bg-red-600 px-4 py-2 rounded text-center font-bold"
                                x-show="questionIndex!=questions.length-1"
                        >
                            Next
                        </button>
                        <button
                                @click.prevent="page='send-issue-page'"
                                class="hoverx-text-gray-500 hover:cursor-pointer bg-red-600 px-4 py-2 rounded text-center font-bold"
                                x-show="questionIndex==questions.length-1"
                        >
                            Next
                        </button>
                        <button
                                @click.prevent="page='send-issue-page'"
                                class="hoverx-text-gray-500 hover:cursor-pointer px-4 py-2 rounded text-center font-bold pt-20"
                                x-show="questionIndex==questions.length-1"
                        >
                            Skip for later
                        </button>
                        <button
                                @click.prevent="questionIndex++"
                                class="hoverx-text-gray-500 hover:cursor-pointer px-4 py-2 rounded text-center font-bold pt-20"
                                x-show="questionIndex!=questions.length-1"
                        >
                            Skip for later
                        </button>
                        <button
                                @click.prevent="questionIndex--"
                                class="hoverx-text-gray-500 hover:cursor-pointer px-4 py-2 rounded text-center font-bold"
                                x-show="questionIndex>0"
                        >
                            Previous question
                        </button>
                    </div>
                </template>
            </div>
        </div>

        <!-- ############################################################## -->
        <!-- ##################### SEND ISSUE PAGE ######################################## -->
        <!-- ############################################################## -->
        <div
                class="space-x-4 p-3 flex h-screen fixed"
                x-show="page=='send-issue-page'"
        >
            <div class="flex-grow flex">
                <div
                        class="m-4 h-screen w-full col-span-2 overflow-y-auto bg-gray-800 p-8"
                >
                    <div class="w-full flex">
                        <h2
                                class="mb-3 text-xl font-medium text-white flex-grow"
                                x-show="missingFields.length!=0"
                        >
                            Your issue - <span x-text="answers._id">LLLL</span> -
                            <span
                                    class="bg-yellow-400 text-yellow-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded dark:bg-yellow-900 dark:text-yellow-300"
                            >INCOMPLETE</span
                            > <span class="text-xs"> All the titles in red are mandatory.</span> <span
                                class="bg-blue-400 text-blue-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded dark:bg-yellow-900 dark:text-yellow-300"
                                x-show="answers.status=='Sent'"
                        >SENT</span>
                        </h2>
                        <h2
                                class="mb-3 text-xl font-medium text-white flex-grow"
                                x-show="missingFields.length==0"
                        >
                            Your issue - <span x-text="answers._id">LLLL</span> -
                            <span
                                    class="bg-green-400 text-green-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded dark:bg-yellow-900 dark:text-yellow-300"
                            >Complete</span> <span class="bg-blue-400 text-blue-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded dark:bg-yellow-900 dark:text-yellow-300"
                                                   x-show="answers.status=='Sent'"
                        >SENT</span>
                        </h2>
                        <div class="flex">
                            <div class="flex items-center me-4">
                                <label class="text-white text-sm">Your email :</label>
                            </div>
                            <div class="flex items-center me-4">
                                <input class="mt-1 w-full px-2 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500 text-white" id="input-group-1" placeholder="your-email@hscb.com"
                                       type="text"
                                       x-model.debounce="answers.author">
                            </div>
                            <div class="flex items-center me-4">
                                <button @click.prevent="submitAnswersInGlobalDB()"
                                        class="text-white hoverx-text-gray-500 hover:cursor-pointer bg-red-600 px-4 py-2 rounded text-center font-bold"
                                        x-show="answers.author&&missingFields.length==0"
                                >
                                    Submit your issue
                                </button>
                                <button class="text-white hoverx-text-gray-500 cursor-not-allowed bg-red-300 px-4 py-2 rounded text-center font-bold"
                                        disabled
                                        x-show="!answers.author||missingFields.length!=0"
                                >
                                    Submit your issue
                                </button>

                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="text-white">
                            <template x-for="question in questions">
                                <div class="p-4 space-y-2 mx-2" x-show="question">
                                    <!--Conditionnal template-->
                                    <div
                                            class="space-y-2"
                                            x-data="{'selected':''}"
                                            x-show="question.template=='conditionnal'"
                                    >
                                        <label
                                                :class="question.required && answers[question.key].length==0? 'text-red-500':''"
                                                class="block mt-1 font-medium text-xl"
                                                x-text="question.name"
                                        >PC Function</label
                                        >
                                        <div
                                                class="text-gray-300"
                                                x-html="question.description"
                                        ></div>
                                        <select
                                                :required="question.required"
                                                class="w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                                name="pc-function"
                                                x-model.debounce="answers[question.key]"
                                        >
                                            <option disabled selected value="">
                                                Select an item
                                            </option>
                                            <template x-for="option in question.options">
                                                <option x-text="option.name" x-value="option.name">
                                                    Core PC
                                                </option>
                                            </template>
                                        </select>

                                        <template x-for="optionCond in question.optionsCond">
                                            <div
                                                    class="mt-4 space-y-2"
                                                    x-show="answers[question.key]==optionCond.show"
                                            >
                                                <div x-show="optionCond.type=='text_input'">
                                                    <label
                                                            class="block font-medium text-xl"
                                                            x-text="optionCond.name"
                                                    >Title of the Issue</label
                                                    >
                                                    <input
                                                            :required="question.required"
                                                            class="mt-1 w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                                            type="text"
                                                            x-model.debounce="answers[optionCond.key]"
                                                    />
                                                </div>
                                            </div>
                                        </template>
                                    </div>
                                    <!-- Search Single select:  -->
                                    <div x-show="question.template=='search_single_select'">
                                        <label
                                                :class="question.required && answers[question.key].length==0? 'text-red-500':''"
                                                class="mt-1 font-medium text-xl"
                                                x-text="question.name"
                                        >PC Function</label
                                        >
                                        <div
                                                class="text-gray-300"
                                                x-html="question.description"
                                        ></div>
                                        <input
                                                :list="question.key"
                                                :required="question.required"
                                                class="w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                                name="pc-function"
                                                x-model.debounce="answers[question.key]"
                                        />
                                        <datalist
                                                :id="question.key"
                                                class="w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                        >
                                            <template x-for="option in question.options">
                                                <option
                                                        x-text="option.name"
                                                        x-value="option.name"
                                                ></option
                                                >
                                            </template>
                                        </datalist>
                                    </div>

                                    <!--list template-->
                                    <div
                                            x-data="{'ans':[]}"
                                            x-show="question.template=='list'"
                                    >
                                        <div class="space-y-2">
                                            <label
                                                    :class="question.required && answers[question.key].length==0? 'text-red-500':''"
                                                    class="block font-medium text-xl"
                                                    for="pc-function"
                                                    x-text="question.name"
                                            >Title of the Issue</label
                                            >
                                            <div
                                                    class="text-gray-300"
                                                    x-html="question.description"
                                            ></div>

                                            <template x-for="(i,index) in ans">
                                                <div class="flex space-x-2">
                                                    <input
                                                            :required="question.required"
                                                            class="mt-1 w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                                            type="text"
                                                            x-model.debounce="ans[index]"
                                                    />
                                                    <div
                                                            @click.prevent="ans.splice(index,1)"
                                                            class="bg-red-600 text-white font-medium w-6 h-6 rounded px-2 mt-3 cursor-pointer place-self-center"
                                                    >
                                                        -
                                                    </div>
                                                </div>
                                            </template>
                                            <div
                                                    @click.prevent="ans.push('1C-0000')"
                                                    class="ml-1 float-end px-2 rounded bg-green-600 text-white font-medium cursor-pointer"
                                            >
                                                +
                                            </div>
                                        </div>
                                        <input
                                                x-model.debounce="answers[question.key]=ans"
                                                x-show="false"
                                        />
                                    </div>

                                    <!--Composite template-->
                                    <div
                                            class="space-y-2"
                                            x-data="{'single_select':'','text_input':''}"
                                            x-show="question.template=='composite'"
                                    >
                                        <label
                                                :class="question.required && answers[question.key].length==0? 'text-red-500':''"
                                                class="block mt-1 font-medium text-xl"
                                                for="pc-function"
                                                x-text="question.name"
                                        >PC Function</label
                                        >
                                        <div
                                                class="text-gray-300"
                                                x-html="question.description"
                                        ></div>
                                        <div class="flex">
                                            <select
                                                    :required="question.required"
                                                    class="px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                                    id="pc-function"
                                                    name="pc-function"
                                                    x-model.debounce="single_select"
                                            >
                                                <option disabled selected value="">
                                                    Select an item
                                                </option>
                                                <template x-for="option in question.options">
                                                    <option
                                                            x-text="option.name"
                                                            x-value="option.name"
                                                    >
                                                        Core PC
                                                    </option>
                                                </template>
                                            </select>
                                            <p class="px-4 self-center">-</p>
                                            <input
                                                    :required="question.required"
                                                    class="mt-1 flex-grow px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                                    type="text"
                                                    x-model.debounce="text_input"
                                            />
                                        </div>
                                        <input
                                                x-model.debounce="answers[question.key]=single_select.concat(' - ').concat(text_input)"
                                                x-show="false"
                                        />
                                    </div>

                                    <!--date template-->
                                    <div x-show="question.template=='date'">
                                        <div class="space-y-2">
                                            <label
                                                    :class="question.required && answers[question.key].length==0? 'text-red-500':''"
                                                    class="block font-medium text-xl"
                                                    x-text="question.name"
                                            >Title of the Issue</label
                                            >
                                            <div
                                                    class="text-gray-300"
                                                    x-html="question.description"
                                            ></div>
                                            <div class="italic"
                                                 x-on:click="answers[question.key]=new Date().toISOString().split('T')[0]">today?
                                            </div>
                                            <input :required="question.required" class="mt-1 w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                                   datepicker
                                                   datepicker-format="yyyy-mm-dd"
                                                   placeholder="YYYY-MM-DD"
                                                   type="text"
                                                   x-mask="9999-99-99"
                                                   x-model.debounce="answers[question.key]"
                                            />
                                        </div>
                                    </div>

                                    <!--Single select template-->
                                    <div x-show="question.template=='single_select'">
                                        <label
                                                :class="question.required && answers[question.key].length==0? 'text-red-500':''"
                                                class="block mt-1 font-medium text-xl"
                                                x-text="question.name"
                                        >PC Function</label
                                        >
                                        <div
                                                class="text-gray-300"
                                                x-html="question.description"
                                        ></div>
                                        <select
                                                :required="question.required"
                                                class="w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                                name="pc-function"
                                                x-model.debounce="answers[question.key]"
                                        >
                                            <option disabled selected value="">
                                                Select an item
                                            </option>
                                            <template x-for="option in question.options">
                                                <option x-text="option.name" x-value="option.name">
                                                    Core PC
                                                </option>
                                            </template>
                                        </select>
                                    </div>

                                    <!--text_input template-->
                                    <div x-show="question.template=='text_input'">
                                        <div>
                                            <label
                                                    :class="question.required && answers[question.key].length==0? 'text-red-500':''"
                                                    class="block font-medium text-xl"
                                                    x-text="question.name"
                                            >Title of the Issue</label
                                            >
                                            <div
                                                    class="text-gray-300"
                                                    x-html="question.description"
                                            ></div>
                                            <input
                                                    :required="question.required"
                                                    class="mt-1 w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                                    type="text"
                                                    x-model.debounce="answers[question.key]"
                                            />
                                        </div>
                                    </div>

                                    <!--Textarea input-->
                                    <div x-show="question.template=='textarea'">
                                        <div>
                                            <label
                                                    :class="question.required && answers[question.key].length==0? 'text-red-500':''"
                                                    class="block font-medium text-xl"
                                                    x-text="question.name"
                                            >Root Cause - Further Details</label
                                            >
                                            <div
                                                    class="text-gray-300"
                                                    x-html="question.description"
                                            ></div>
                                            <textarea
                                                    :required="question.required"
                                                    class="min-h-[100px] mt-1 w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                                    row="5"
                                                    type="textarea"
                                                    x-model.debounce="answers[question.key]"
                                            ></textarea>
                                        </div>
                                    </div>

                                    <!--multiple checkboxes template-->
                                    <div x-data="{filter:''}" x-show="question.template=='multiple_checkbox'">
                                        <div>
                                            <div class="flex">
                                                <label
                                                        :class="question.required && answers[question.key].length==0? 'text-red-500':''"
                                                        class="block font-medium text-xl flex-grow"
                                                        x-text="question.name"
                                                >Select Asset class</label
                                                >
                                                <form class="max-w-md mx-auto">
                                                    <label class="mb-2 text-sm font-medium sr-only text-white"
                                                           for="default-search">Search</label>
                                                    <div class="relative">
                                                        <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                                                            <svg aria-hidden="true" class="w-4 h-4 text-gray-400"
                                                                 fill="none" viewBox="0 0 20 20"
                                                                 xmlns="http://www.w3.org/2000/svg">
                                                                <path d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z" stroke="currentColor"
                                                                      stroke-linecap="round" stroke-linejoin="round"
                                                                      stroke-width="2"/>
                                                            </svg>
                                                        </div>
                                                        <input class="block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required
                                                               type="search"
                                                               x-model.debounce="filter"/>
                                                    </div>
                                            </div>

                                            <div
                                                    class="text-gray-300"
                                                    x-html="question.description"
                                            ></div>
                                            <div class="space-y-2 mt-1">
                                                <div
                                                        class="w-full grid grid-cols-3 auto-cols-max max-h-[50vh] gap-2 overflow-y-auto"
                                                >
                                                    <template
                                                            x-for="(option,index) in question.options"
                                                    >
                                                        <div class="flex items-center"
                                                             x-show="filter.length==0||option.name.toLowerCase().includes(filter.toLowerCase())">
                                                            <input
                                                                    :class="answers[question.key]&&answers[question.key].includes(option.name)&&'bg-red-600 border-red-900'"
                                                                    @click.prevent="saveAnswer(question.key,option.name)"
                                                                    class="h-4 w-4"
                                                                    name="services"
                                                                    type="checkbox"
                                                                    x-value="option.name"
                                                            />
                                                            <label
                                                                    class="ml-2 text-sm font-medium"
                                                                    x-text="option.name"
                                                            >ALCM</label
                                                            >
                                                        </div>
                                                    </template>
                                                    <template x-if="answers[question.key]&&answers[question.key].includes('Other')">
                                                        <div class="w-full flex flex-col">
                                                            <label class="text-white">Please provide details</label>
                                            <textarea
                                                    class="min-h-[100px] mt-1 px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                                    row="5"
                                                    type="textarea"
                                                    x-model.debounce="answers[question.key]['other']"
                                            ></textarea>
                                                        </div>

                                        </template>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>

                <div
                        class="m-4 h-screen overflow-y-auto bg-gray-800 w-1/4  p-8 text-white space-y-4"
                >
                    <h2 class="mb-3 text-xl font-medium text-white">
                        Similar issues (comming soon)
                    </h2>
                    <p>To use similar issues, please fill the title and description of the issue.</p>
                    <div>
                        <label class="block font-medium text ">Title of the Issue</label>
                        <div class="text-gray-300"><p class="text-sm">Headline sentence on Issue</p>
                        </div>
                        <input class="mt-1 w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                               required="required" type="text" x-model.debounce="answers['Title']">
                    </div>
                    <div>
                        <div>
                            <label class="block font-medium">Description of the Issue</label>
                            <div class="text-gray-300"><p class="text-sm">Outline of the issue including: What occurred,
                                Frequency of issue, Identification &amp; detection process, Reason for occurrence,
                                Result of Issue, Prior solving approaches, Other functions/ regions involved in
                                solution/ suffer Issue, Other impacts besides BS and PL (Impact of Issue on ex.
                                incorrect reporting, RWA values, delays, pending, P&amp;L/BS/GL breaks, funding, etc.),
                                Risk if no fix (Risks associated with the issue for Exco and CFO to be aware of, client
                                reputation risk)</p>
                            </div>
                            <textarea
                                    class="min-h-[100px] mt-1 w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500"
                                    row="5" type="textarea" x-model.debounce="answers['Description of the Issue']"></textarea>
                        </div>
                    </div>
                    <button class="bg-red-300 text-white px-4 py-2 rounded">Search similar issues - comming soon
                        <button>
                </div>
            </div>
        </div>

        <!-- ############################################################## -->
        <!-- ##################### GET CONFIG PAGE ######################################## -->
        <!-- ############################################################## -->
        <div
                class="space-x-4 p-8 mb-20 x-show="
                x-show="page=='get-jaffar-config'"
        >
            <div class="grid grid-cols-3 gap-10">
                <div
                        class="m-4 h-screen col-span-2 w-full overflow-y-auto bg-gray-800 p-8"
                >
                    <h2 class="mb-3 text-xl font-medium text-white">
                        Export the Jaffar config file
                    </h2>
                    <div>
                        <div>
                  <textarea
                          class="min-h-[85vh] mt-1 w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-red-500 focus:border-red-500 text-white"
                          disabled
                          row="20"
                          type="textarea"
                          x-model.debounce="getJaffarConfig()"
                  ></textarea>
                        </div>
                    </div>
                </div>

                <div
                        class="m-4 h-screen w-full overflow-y-auto bg-gray-800 p-8 text-white"
                >
                    <h2 class="mb-3 text-xl font-medium text-white">
                        How to use me?
                    </h2>
                    <ul class="space-y-2">
                        <li>
                            1. Copy this code
                            <span
                                    @click="navigator.clipboard.writeText(getJaffarConfig())"
                                    class="bg-red-600 hover:bg-red-500 text-white px-4 py-2 ml-4 text-sm font-medium rounded-lg focus:z-10 focus:ring-2"
                            >Copy it</span>
                            >
                        </li>
                        <li>2. Past it into the Jaffar Questions studio in Sultan</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- get my-issues page -->
        <div class="space-x-4 p-8 mb-20 x-show=" x-show="page=='my-issues'">
            <!-- search box -->
            <div>
                <form class="max-w-md mx-auto">
                    <label
                            class="mb-2 text-sm font-medium text-gray-900 sr-only text-white"
                            for="default-search"
                    >Search</label
                    >
                    <div class="relative">
                        <div
                                class="absolute inset-y-0 start-0 flex items-center ps-1 pointer-events-none"
                        >
                            <svg
                                    aria-hidden="true"
                                    class="w-4 h-4 text-gray-500 dark:text-gray-400"
                                    fill="none"
                                    viewBox="0 0 20 20"
                                    xmlns="http://www.w3.org/2000/svg"
                            >
                                <path
                                        d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
                                        stroke="currentColor"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                />
                            </svg>
                        </div>
                        <input
                                class="block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"
                                id="default-search"
                                placeholder="Search issues..."
                                required
                                type="search"
                                x-model.debounce="searchInput"
                        />
                        <button
                                class="text-white absolute end-2.5 bottom-4 hover:bg-red-500 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 bg-red-600 hover:bg-blue-700 focus:ring-blue-800"
                                type="submit"
                        >
                            Search
                        </button>
                    </div>
                </form>
            </div>

            <!-- open issues -->
            <div class="mt-10">
                <h2 class="text-white font-medium text-lg p-4">Open issues</h2>

                <div
                        class="w-[75vw] h-[450px] overflow-y-auto"
                        id="openIssues"
                ></div>
            </div>

            <!-- close issues -->
            <div class="mt-20">
                <h2 class="text-white font-medium text-lg p-4">Closed issues</h2>

                <div
                        class="w-[75vw] h-[450px] overflow-y-auto"
                        id="closedIssues"
                ></div>
            </div>

            x-data
        </div>

        <!-- Alert system -->

        <div
                class="fixed right-10 bottom-0 items-center p-4 mb-4 text-sm border rounded-lg bg-gray-800 text-black border-gray-800 text-white"
                role="alert"
                x-show="alert"
        >
            <svg
                    aria-hidden="true"
                    class="flex-shrink-0 inline w-4 h-4 me-3"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg"
            >
                <path
                        d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"
                />
            </svg>
            <span class="sr-only">Info</span>
            <div>
                <span class="font-medium" x-text="alert.type"></span>
                <span x-text="alert.message"></span>
            </div>
        </div>


    </div>
</div>
    </template>



</body>

<footer>
    <script
            defer
            src="https://cdn.jsdelivr.net/npm/@alpinejs/mask@3.x.x/dist/cdn.min.js"
    ></script>
    <script
            defer
            src="https://cdn.jsdelivr.net/npm/alpinejs@3.14.3/dist/cdn.min.js"
    ></script>
<!--    <script src="https://stash.hk.hsbc/projects/STRATPCJAFFAR/repos/pc-jaffar/raw/apps/pc_analytics_jaffar/assets/markdown.js"></script>-->
</footer>
</html>
